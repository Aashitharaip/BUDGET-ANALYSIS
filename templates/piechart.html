<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Budget Report</title>
    <style>
        /* Add your styles for the PDF here */
        body {
            background-color: #333c30; /* Background color of the entire page */
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
            background-color:#aca273 ;
        }
        th {
            padding: 8px;
            text-align: left;
            border-bottom: 1px solid whitesmoke;
            color:#aca273;
            font-weight: 1000;
            font-size: large;
        }
        td{
            padding: 8px;
            text-align: left;
            border-bottom: 1px solid whitesmoke;
            color:#333c30;
            font-weight: 1000;
            font-size:large;

        }
        th {
            background-color:#4f5539;
        }
        .chart-container {
            margin:0 auto;
            margin-top: 20px;
            width:30%;
            
            

            
        }
        h1,h2{
            color:#aca273;
            text-align:center;
        }
        hr{
            color:#aca273;
        }
    </style>
</head>
<body>
    <h1>Your Budget Breakdown according to the 50-30-20 rule</h1>
    
    <h2>Summary Table</h2>
    <table>
        <tr>
            <th>Category</th>
            <th>Amount (₹)</th>
        </tr>
        <tr>
            <td>Needs</td>
            <td>{{ needs }}₹</td>
        </tr>
        <tr>
            <td>Wants</td>
            <td>{{ wants }}₹</td>
        </tr>
        <tr>
            <td>Savings</td>
            <td>{{ savings }}₹</td>
        </tr>
        <!-- Add more rows as needed -->
    </table>
    <br><br><hr>
    
    <div class="chart-container">
        
        <canvas id="budgetPieChart"></canvas>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var needs = JSON.parse('{{ needs|tojson|safe }}');
            var wants = JSON.parse('{{ wants|tojson|safe }}');
            var savings = JSON.parse('{{ savings|tojson|safe }}');

            var ctx = document.getElementById('budgetPieChart').getContext('2d');
            var budgetPieChart = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['Needs', 'Wants', 'Savings'],
                    datasets: [{
                        data: [needs, wants, savings],
                        backgroundColor: ['#babda4', '#a4babd', '#bda4ba'],
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#aca273', // legend label color
                                font: {
                                    size: 12 // Adjust font size as needed
                                }
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    var label = context.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    label += Math.round(context.raw) + '₹'; // Displaying as ₹, adjust as necessary
                                    return label;
                                }
                            }
                        },
                        title: {
                            display: true,
                            text: 'Budget Categories',
                            font: {
                                size: 25 // Adjust title font size as needed
                            },
                            color: '#aca273',
                            padding: 20
                        }
                    },
                    animation: {
                        animateRotate: true,
                        animateScale: true
                    }
                }
            });
        });
    </script>
</body>
</html>
